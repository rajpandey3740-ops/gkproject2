{"version":3,"file":"live-component.processor.js","sourceRoot":"","sources":["../../../../src/component/plugins/live-component.processor.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,kBAAkB,EAAE,MAAM,cAAc,CAAC;AAUlD,MAAM,OAAO,sBAA6B,SAAQ,kBAAgD;IAChG,OAAO,CACL,OAAgD,EAChD,IAAuD;QAEvD,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QACjC,MAAM,KAAK,GAAoB,EAAE,CAAC;QAElC,OAAO,CAAoB;YACzB,MAAM,EAAE,CAAC,EAAc,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;YACpD,OAAO,EAAE,CAAC,EAAc,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;SACvD,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,EAAE;YACV,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,OAAO,kBAAkB,CAAC,gBAAgB,CAAC;IAC7C,CAAC;CACF","sourcesContent":["import { ComponentPostProcessor, ComponentProvision } from '../types';\nimport { ComponentProcessor } from '../processor';\nimport { LifeCycleHook, LiveRendererLike } from '../../renderer';\n\n\nexport interface LiveComponentThis {\n  onBind: (fn: () => void) => void;\n  onClear: (fn: () => void) => void;\n}\n\n\nexport class LiveComponentProcessor<Node> extends ComponentProcessor<Node, LiveRendererLike<Node>> {\n  process(\n    provide: (provision: ComponentProvision) => void,\n    post: (processor: ComponentPostProcessor<Node>) => void,\n  ): void {\n    const renderer = this.renderer();\n    const hooks: LifeCycleHook[] = [];\n\n    provide(<LiveComponentThis>{\n      onBind: (fn: () => void) => hooks.push({ bind: fn }),\n      onClear: (fn: () => void) => hooks.push({ clear: fn }),\n    });\n\n    post(node => {\n      hooks.forEach(hook => renderer.hook(node, hook));\n    });\n  }\n\n  priority(): number {\n    return ComponentProcessor.PriorityFallback;\n  }\n}\n"]}